# info4dm-g1g4
## 概要
+ 問題
  + Pixivの人気イラストにはどのような特徴があるのかを調べる

+ 提案
  + イラストの画像とタグデータを分析

+ 目標
  + データ分析・機械学習を通して人気イラストの特徴がどのようなものか評価する

## ディレクトリ説明

+ pixiv_crawl
  + scrapyを用いてpixivからイラストデータとそれに付属する情報をクローリングするスクリプト

+ notebooks
ipynb形式で分析を行ったノートが入っています
  1. イラストを入力として自己組織化マップで写像し、K-means法でクラスタリング(クラスタ数はelbow法で決定)して色素情報をクラスタリング
  2. 1のノートを関数化したノート。クラスタ数決定の関数とelbow法にて決定に使用した誤差平方和のプロット、最適な誤差平方和の位置を求める関数を別途追加
  3. 2ではクラスタ数をMAXを定義してmaxまでの誤差平方和を計算させていたものを、最適なクラスタ数が決まり次第、決定関数の実行を終了するようにしている。2でプロットしていた可視化をremoveしている。
  4. 最適クラスタ数によって分割された色素情報について散布図を出力するノート。

## 使用方法

+ pixiv_crawl
  + pixiv_crawl/pixiv_crawl/下にて`scrapy crawl pixiv_daily_ranking`を実行するとクローリングを開始します。
  + ただしIDとPASSが必要になるので、各自PCにdirenvの環境構築を行い、環境変数に
    + PIXIV_USER_NAME = ユーザID
    + PIXIV_USER_PASS = パスワード
  を追記しておいてください。そうするとos.getenv()で変数を読み込みます。
  + デフォルトでいいね数5000以上のイラストをクローリングするようにしているので、変更したければpixiv_crawl/pixiv_crawl/spiders/ranks_spider.pyを変更してください。
  + クローリングの基準になる日付はsettings.pyにて設定できます。

+ notebooks
  + 基本的にはjupyter notebookにメモなど残していますので実行しながら確認してください(適宜ディレクトリパスなども確認してください)
